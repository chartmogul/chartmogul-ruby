---
http_interactions:
- request:
    method: post
    uri: https://api.chartmogul.com/v1/data_sources
    body:
      encoding: UTF-8
      string: '{"name":"Subscription Test Data Source api_connect"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      content-type:
      - application/json
      date:
      - Thu, 14 Sep 2023 00:51:43 GMT
      content-length:
      - '179'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c","name":"Subscription
        Test Data Source api_connect","system":"Import API","created_at":"2023-09-14T00:51:43.507Z","status":"idle"}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:43 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/customers
    body:
      encoding: UTF-8
      string: '{"external_id":"test_cus_ext_id","name":"Test Customer","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      content-type:
      - application/json
      date:
      - Thu, 14 Sep 2023 00:51:44 GMT
      content-length:
      - '791'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"id":119415219,"uuid":"cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a","external_id":"test_cus_ext_id","name":"Test
        Customer","email":"","status":"New Lead","customer-since":null,"attributes":{"custom":{},"clearbit":{},"stripe":{},"tags":[]},"data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c","data_source_uuids":["ds_dfa09640-5298-11ee-8b53-ef7959416a0c"],"external_ids":["test_cus_ext_id"],"company":"","country":null,"state":null,"city":"","zip":null,"lead_created_at":null,"free_trial_started_at":null,"address":{"country":null,"state":null,"city":"","address_zip":null},"mrr":0,"arr":0,"billing-system-url":null,"chartmogul-url":"https://app.chartmogul.com/#/customers/119415219-Test_Customer","billing-system-type":"Import
        API","currency":"EUR","currency-sign":"â‚¬","owner":null}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:44 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/plans
    body:
      encoding: UTF-8
      string: '{"name":"Test Plan1","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:51:44 GMT
      etag:
      - W/"f71c2c7bff61217dea5bd74e6f018f3f"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - 7eb2349db8dad26cf56f5555aef58065
      x-runtime:
      - '0.176557'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '225'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"external_id":"ccc23820-34c6-013c-9c91-027103c7ebee","name":"Test
        Plan1","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c","uuid":"pl_ccc23820-34c6-013c-9c91-027103c7ebee"}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:44 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/plans
    body:
      encoding: UTF-8
      string: '{"name":"Test Plan2","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:51:45 GMT
      etag:
      - W/"27d2143b947505ef59461ed19c1098fb"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - 956301e0a7027cefd8a69755aef20696
      x-runtime:
      - '0.302991'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '225'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"external_id":"cd04e560-34c6-013c-9c92-027103c7ebee","name":"Test
        Plan2","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c","uuid":"pl_cd04e560-34c6-013c-9c92-027103c7ebee"}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:45 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/import/customers/cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a/invoices
    body:
      encoding: UTF-8
      string: '{"invoices":[{"date":"2016-01-01 12:00:00 UTC","currency":"USD","line_items":[{"type":"subscription","subscription_external_id":"test_cus_sub_ext_id1","service_period_start":"2016-01-01
        12:00:00 UTC","service_period_end":"2016-02-01 12:00:00 UTC","amount_in_cents":1000,"plan_uuid":"pl_ccc23820-34c6-013c-9c91-027103c7ebee"}],"external_id":"test_tr_inv_ext_id1"},{"date":"2016-01-01
        12:00:00 UTC","currency":"USD","line_items":[{"type":"subscription","subscription_external_id":"test_cus_sub_ext_id2","service_period_start":"2016-01-01
        12:00:00 UTC","service_period_end":"2016-02-01 12:00:00 UTC","amount_in_cents":1000,"plan_uuid":"pl_cd04e560-34c6-013c-9c92-027103c7ebee"}],"external_id":"test_tr_inv_ext_id2"}],"customer_uuid":"cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:51:46 GMT
      etag:
      - W/"bf1909e48c8e1e4c42c17ee95bedf70c"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - ae019f0341d444f3e6f9ced425e8f776
      x-runtime:
      - '0.723632'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '1678'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"invoices":[{"uuid":"inv_42ceebdf-3545-48d8-a6cd-1c92e7d9fad7","date":"2016-01-01T12:00:00.000Z","due_date":null,"errors":{},"external_id":"test_tr_inv_ext_id1","currency":"USD","line_items":[{"uuid":"li_7a6de997-8774-4a40-a8f9-11548190208b","external_id":null,"type":"subscription","subscription_uuid":"sub_e28c656c-915a-4546-8fff-3a16f45d65ff","subscription_external_id":"test_cus_sub_ext_id1","prorated":false,"proration_type":null,"service_period_start":"2016-01-01T12:00:00.000Z","service_period_end":"2016-02-01T12:00:00.000Z","plan_uuid":"pl_ccc23820-34c6-013c-9c91-027103c7ebee","amount_in_cents":1000,"quantity":1,"discount_code":"","discount_amount_in_cents":0,"tax_amount_in_cents":0,"transaction_fees_in_cents":0,"account_code":"","transaction_fees_currency":null,"discount_description":null,"event_order":null}],"transactions":[]},{"uuid":"inv_5c22cd8d-832e-4dce-b3e1-67542c15a9be","date":"2016-01-01T12:00:00.000Z","due_date":null,"errors":{},"external_id":"test_tr_inv_ext_id2","currency":"USD","line_items":[{"uuid":"li_49b97c27-3d0e-403d-8e12-1cabc528ef0a","external_id":null,"type":"subscription","subscription_uuid":"sub_11929cff-a7ef-4e86-8a95-db6558a5f7ba","subscription_external_id":"test_cus_sub_ext_id2","prorated":false,"proration_type":null,"service_period_start":"2016-01-01T12:00:00.000Z","service_period_end":"2016-02-01T12:00:00.000Z","plan_uuid":"pl_cd04e560-34c6-013c-9c92-027103c7ebee","amount_in_cents":1000,"quantity":1,"discount_code":"","discount_amount_in_cents":0,"tax_amount_in_cents":0,"transaction_fees_in_cents":0,"account_code":"","transaction_fees_currency":null,"discount_description":null,"event_order":null}],"transactions":[]}]}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:46 GMT
- request:
    method: get
    uri: https://api.chartmogul.com/v1/import/customers/cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a/subscriptions
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 200
      message: OK
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:51:46 GMT
      etag:
      - W/"f4378916fade1e3ffc81c4fbeda0b316"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - 82f3e609e84701703514dd326e2cbc47
      x-runtime:
      - '0.067397'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '692'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"customer_uuid":"cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a","subscriptions":[{"external_id":"test_cus_sub_ext_id2","uuid":"sub_11929cff-a7ef-4e86-8a95-db6558a5f7ba","cancellation_dates":[],"plan_uuid":"pl_cd04e560-34c6-013c-9c92-027103c7ebee","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"},{"external_id":"test_cus_sub_ext_id1","uuid":"sub_e28c656c-915a-4546-8fff-3a16f45d65ff","cancellation_dates":[],"plan_uuid":"pl_ccc23820-34c6-013c-9c91-027103c7ebee","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"}],"current_page":1,"total_pages":1,"cursor":"MjAyMy0wOS0xNFQwMDo1MTo0NS44NDkxNzEwMDBaJnN1Yl9lMjhjNjU2Yy05MTVhLTQ1NDYtOGZmZi0zYTE2ZjQ1ZDY1ZmY=","has_more":false}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:46 GMT
- request:
    method: patch
    uri: https://api.chartmogul.com/v1/import/subscriptions/sub_11929cff-a7ef-4e86-8a95-db6558a5f7ba
    body:
      encoding: UTF-8
      string: '{"cancelled_at":"2016-01-15 12:00:00 UTC"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 202
      message: Accepted
    headers:
      cache-control:
      - no-cache
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:51:46 GMT
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - 3819aaf2df1977d1ed370c81c439b6b7
      x-runtime:
      - '0.207085'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '312'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"external_id":"test_cus_sub_ext_id2","uuid":"sub_11929cff-a7ef-4e86-8a95-db6558a5f7ba","cancellation_dates":["2016-01-15T12:00:00.000Z"],"plan_uuid":"pl_cd04e560-34c6-013c-9c92-027103c7ebee","customer_uuid":"cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:51:46 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/customers/cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a/connect_subscriptions
    body:
      encoding: UTF-8
      string: '{"subscriptions":[{"external_id":"test_cus_sub_ext_id2","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"},{"external_id":"test_cus_sub_ext_id1","data_source_uuid":"ds_dfa09640-5298-11ee-8b53-ef7959416a0c"}]}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 202
      message: Accepted
    headers:
      content-type:
      - application/json
      date:
      - Thu, 14 Sep 2023 00:56:28 GMT
      content-length:
      - '2'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: "{}"
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:56:27 GMT
- request:
    method: get
    uri: https://api.chartmogul.com/v1/customers/cus_dfef1c3e-5298-11ee-b3b9-ab7c15594f8a/subscriptions
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 200
      message: OK
    headers:
      access-control-allow-credentials:
      - 'true'
      content-type:
      - application/json
      date:
      - Thu, 14 Sep 2023 00:56:28 GMT
      content-length:
      - '496'
      connection:
      - keep-alive
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJlbnRyaWVzIjpbeyJpZCI6MjIxNzY2Mzk4NywiZXh0ZXJuYWxfaWQiOiJ0ZXN0X2N1c19zdWJfZXh0X2lkMSIsInN1YnNjcmlwdGlvbl9zZXRfZXh0ZXJuYWxfaWQiOiJ0ZXN0X2N1c19zdWJfZXh0X2lkMSIsInF1YW50aXR5IjoxLCJ1dWlkIjoiM2UzNzlmNjEtZjJjZS00MDdiLTg3ZmQtMDg4OWIwYTVmZjQ3IiwibXJyIjo0MDA0LCJhcnIiOjQ4MDQ4LCJzdGF0dXMiOiJhY3RpdmUiLCJwbGFuIjoiVGVzdCBQbGFuMSIsImJpbGxpbmctY3ljbGUiOiJkYXkiLCJiaWxsaW5nLWN5Y2xlLWNvdW50Ijo3LCJzdGFydC1kYXRlIjoiMjAxNi0wMS0wMVQxMjowMDowMCswMDowMCIsImVuZC1kYXRlIjoiMjAxNi0wMi0wMVQxMjowMDowMCswMDowMCIsImN1cnJlbmN5IjoiRVVSIiwiY3VycmVuY3ktc2lnbiI6IuKCrCJ9XSwiaGFzX21vcmUiOmZhbHNlLCJwZXJfcGFnZSI6MjAwLCJwYWdlIjoxLCJjdXJzb3IiOiJjM1ZpYzJOeWFYQjBhVzl1YzE5dVpYaDBYM0JoWjJVOU1nPT0ifQ==
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:56:28 GMT
- request:
    method: delete
    uri: https://api.chartmogul.com/v1/data_sources/ds_dfa09640-5298-11ee-8b53-ef7959416a0c
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Authorization:
      - Basic hidden
  response:
    status:
      code: 204
      message: No Content
    headers:
      access-control-allow-credentials:
      - 'true'
      date:
      - Thu, 14 Sep 2023 00:56:29 GMT
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: ''
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:56:29 GMT
recorded_with: VCR 5.1.0
