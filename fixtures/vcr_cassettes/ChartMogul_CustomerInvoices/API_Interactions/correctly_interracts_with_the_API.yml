---
http_interactions:
- request:
    method: post
    uri: https://api.chartmogul.com/v1/data_sources
    body:
      encoding: UTF-8
      string: '{"name":"Customer Invoices Test Data Source"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      content-type:
      - application/json
      date:
      - Thu, 14 Sep 2023 00:06:51 GMT
      content-length:
      - '172'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"uuid":"ds_9b3b266a-5292-11ee-810a-73f79c4c42c8","name":"Customer
        Invoices Test Data Source","system":"Import API","created_at":"2023-09-14T00:06:51.768Z","status":"idle"}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:51 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/customers
    body:
      encoding: UTF-8
      string: '{"external_id":"test_cus_ext_id","name":"Test Customer","email":"test@customer.com","country":"DE","city":"Berlin","data_source_uuid":"ds_9b3b266a-5292-11ee-810a-73f79c4c42c8"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      content-type:
      - application/json
      date:
      - Thu, 14 Sep 2023 00:06:52 GMT
      content-length:
      - '825'
      connection:
      - keep-alive
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6MTE5MzgzNTM4LCJ1dWlkIjoiY3VzXzliNmJkYTU4LTUyOTItMTFlZS1hYTk3LTI3ODFkMTliYTExNCIsImV4dGVybmFsX2lkIjoidGVzdF9jdXNfZXh0X2lkIiwibmFtZSI6IlRlc3QgQ3VzdG9tZXIiLCJlbWFpbCI6InRlc3RAY3VzdG9tZXIuY29tIiwic3RhdHVzIjoiTmV3IExlYWQiLCJjdXN0b21lci1zaW5jZSI6bnVsbCwiYXR0cmlidXRlcyI6eyJjdXN0b20iOnt9LCJjbGVhcmJpdCI6e30sInN0cmlwZSI6e30sInRhZ3MiOltdfSwiZGF0YV9zb3VyY2VfdXVpZCI6ImRzXzliM2IyNjZhLTUyOTItMTFlZS04MTBhLTczZjc5YzRjNDJjOCIsImRhdGFfc291cmNlX3V1aWRzIjpbImRzXzliM2IyNjZhLTUyOTItMTFlZS04MTBhLTczZjc5YzRjNDJjOCJdLCJleHRlcm5hbF9pZHMiOlsidGVzdF9jdXNfZXh0X2lkIl0sImNvbXBhbnkiOiIiLCJjb3VudHJ5IjoiREUiLCJzdGF0ZSI6bnVsbCwiY2l0eSI6IkJlcmxpbiIsInppcCI6bnVsbCwibGVhZF9jcmVhdGVkX2F0IjpudWxsLCJmcmVlX3RyaWFsX3N0YXJ0ZWRfYXQiOm51bGwsImFkZHJlc3MiOnsiY291bnRyeSI6Ikdlcm1hbnkiLCJzdGF0ZSI6bnVsbCwiY2l0eSI6IkJlcmxpbiIsImFkZHJlc3NfemlwIjpudWxsfSwibXJyIjowLCJhcnIiOjAsImJpbGxpbmctc3lzdGVtLXVybCI6bnVsbCwiY2hhcnRtb2d1bC11cmwiOiJodHRwczovL2FwcC5jaGFydG1vZ3VsLmNvbS8jL2N1c3RvbWVycy8xMTkzODM1MzgtVGVzdF9DdXN0b21lciIsImJpbGxpbmctc3lzdGVtLXR5cGUiOiJJbXBvcnQgQVBJIiwiY3VycmVuY3kiOiJFVVIiLCJjdXJyZW5jeS1zaWduIjoi4oKsIiwib3duZXIiOm51bGx9
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:52 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/plans
    body:
      encoding: UTF-8
      string: '{"name":"Test Plan","interval_count":7,"interval_unit":"day","external_id":"test_cus_pl_ext_id","data_source_uuid":"ds_9b3b266a-5292-11ee-810a-73f79c4c42c8"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:06:52 GMT
      etag:
      - W/"0ac282d9a2c20fc14b8ceaa69232c2e3"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - a77ce65af3fe8b5b809113a7559b59dd
      x-runtime:
      - '0.177114'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '206'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"external_id":"test_cus_pl_ext_id","name":"Test Plan","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_9b3b266a-5292-11ee-810a-73f79c4c42c8","uuid":"pl_9ba5fc10-5292-11ee-a82a-7fd6d789b00e"}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:52 GMT
- request:
    method: get
    uri: https://api.chartmogul.com/v1/import/customers/cus_9b6bda58-5292-11ee-aa97-2781d19ba114/invoices
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 200
      message: OK
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:06:52 GMT
      etag:
      - W/"2a5cbe7780706acda5bcaa8a2544cae1"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - 8496ca960cce6c659eafbb30a5506b67
      x-runtime:
      - '0.074903'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '138'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"customer_uuid":"cus_9b6bda58-5292-11ee-aa97-2781d19ba114","invoices":[],"current_page":1,"total_pages":0,"cursor":null,"has_more":false}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:52 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/import/customers/cus_9b6bda58-5292-11ee-aa97-2781d19ba114/invoices
    body:
      encoding: UTF-8
      string: '{"invoices":[{"date":"2016-01-01 12:00:00 UTC","currency":"USD","line_items":[{"type":"subscription","subscription_external_id":"test_cus_sub_ext_id","service_period_start":"2016-01-01
        12:00:00 UTC","service_period_end":"2016-02-01 12:00:00 UTC","amount_in_cents":1000,"cancelled_at":"2016-01-15
        12:00:00 UTC","prorated":false,"quantity":5,"discount_amount_in_cents":1200,"discount_code":"DISCCODE","tax_amount_in_cents":200,"external_id":"test_cus_li_ext_id","plan_uuid":"pl_9ba5fc10-5292-11ee-a82a-7fd6d789b00e"}],"transactions":[{"type":"payment","date":"2016-01-01
        12:00:00 UTC","result":"successful","external_id":"test_cus_tr_ext_id"}],"external_id":"test_cus_inv_ext_id","customer_external_id":"test_cus_ext_id","due_date":"2016-01-07
        12:00:00 UTC"}],"customer_uuid":"cus_9b6bda58-5292-11ee-aa97-2781d19ba114"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - max-age=0, private, must-revalidate
      content-type:
      - application/json; charset=utf-8
      date:
      - Thu, 14 Sep 2023 00:06:54 GMT
      etag:
      - W/"d03b738199cb0e97bc22a091479d9662"
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - dd2d467e2118dc2769ff49df372efaaa
      x-runtime:
      - '1.171732'
      x-xss-protection:
      - 1; mode=block
      content-length:
      - '1143'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: '{"invoices":[{"uuid":"inv_d3dc0f63-ff91-41e8-81a1-cb94eb0f8a00","date":"2016-01-01T12:00:00.000Z","due_date":"2016-01-07T12:00:00.000Z","errors":{},"external_id":"test_cus_inv_ext_id","currency":"USD","line_items":[{"uuid":"li_35bf6f2c-b04f-420a-b5fe-137324841277","external_id":"test_cus_li_ext_id","type":"subscription","subscription_uuid":"sub_0210a1e2-4a5e-4061-9ddd-dfe96989009f","subscription_external_id":"test_cus_sub_ext_id","prorated":false,"proration_type":null,"service_period_start":"2016-01-01T12:00:00.000Z","service_period_end":"2016-02-01T12:00:00.000Z","plan_uuid":"pl_9ba5fc10-5292-11ee-a82a-7fd6d789b00e","amount_in_cents":1000,"quantity":5,"discount_code":"DISCCODE","discount_amount_in_cents":1200,"tax_amount_in_cents":200,"transaction_fees_in_cents":0,"account_code":"","transaction_fees_currency":null,"discount_description":null,"event_order":null}],"transactions":[{"uuid":"tr_7c019044-3156-4ca1-b598-a46f0aad41a0","external_id":"test_cus_tr_ext_id","amount_in_cents":null,"type":"payment","date":"2016-01-01T12:00:00.000Z","result":"successful","transaction_fees_in_cents":null,"transaction_fees_currency":null}]}]}'
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:54 GMT
- request:
    method: delete
    uri: https://api.chartmogul.com/v1/data_sources/ds_9b3b266a-5292-11ee-810a-73f79c4c42c8/customers/cus_9b6bda58-5292-11ee-aa97-2781d19ba114/invoices
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Authorization:
      - Basic hidden
  response:
    status:
      code: 204
      message: No Content
    headers:
      access-control-allow-credentials:
      - 'true'
      cache-control:
      - no-cache
      date:
      - Thu, 14 Sep 2023 00:06:54 GMT
      referrer-policy:
      - strict-origin-when-cross-origin
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-frame-options:
      - DENY
      x-permitted-cross-domain-policies:
      - none
      x-request-id:
      - 10bbd37a05fa08e0fd4fe9114e39609f
      x-runtime:
      - '0.249666'
      x-xss-protection:
      - 1; mode=block
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: ''
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:54 GMT
- request:
    method: delete
    uri: https://api.chartmogul.com/v1/data_sources/ds_9b3b266a-5292-11ee-810a-73f79c4c42c8
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.0.0
      Authorization:
      - Basic hidden
  response:
    status:
      code: 204
      message: No Content
    headers:
      access-control-allow-credentials:
      - 'true'
      date:
      - Thu, 14 Sep 2023 00:06:55 GMT
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: ''
    http_version:
  recorded_at: Thu, 14 Sep 2023 00:06:55 GMT
recorded_with: VCR 5.1.0
