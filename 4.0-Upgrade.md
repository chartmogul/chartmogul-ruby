# Upgrading to chartmogul-python 4.0.0

This new version replaces the existing pagination for the `.all()` endpoints that used a combination of `page` and `per_page` parameters, and instead uses a `cursor` based pagination. So to list (as an example) Plans you now can:

```ruby
ChartMogul.global_api_key = 'your-api-key'

# Getting the first page
contacts = ChartMogul::Contacts.all(per_page: 3)

# This will return an array of entries (if available), and a cursor + has_more fields
{
  "entries" => [
    {
      "uuid" => "con_1922c172-9174-11ed-b655-47c5fb422d6c",
      "customer_uuid" => "cus_19580b15-1ab7-40ec-bdb9-638b81354b9e",
      "customer_external_id" => "scus_021",
      "data_source_uuid" => "ds_2b98cb2c-5bf0-11ec-a5d0-07b36dac065d",
      "position" => 1
    },
    {
      "uuid" => "con_c12a64ea-9180-11ed-b6ec-9752d090f315",
      "customer_uuid" => "cus_19580b15-1ab7-40ec-bdb9-638b81354b9e",
      "customer_external_id" => "scus_021",
      "data_source_uuid" => "ds_2b98cb2c-5bf0-11ec-a5d0-07b36dac065d",
      "position" => 2
    }
  ],
  "cursor" => "MjAyMy0wMS0xMVQwNzoyNToyOS4wMDI5MzIwMDBaJmNvbl8xZmUyMWEzMi05MTgxLTExZWQtYjUzNi03Zjg1NmQ2YTViMmQ=",
  "has_more" => false
}

if contacts.has_more:
    more_contacts = ChartMogul::Contacts.all(per_page: 3, cursor: contacts.cursor)
```

If you have existing code that relies on the `page` parameter, those requests will now throw an error now alerting you of their deprecation.
