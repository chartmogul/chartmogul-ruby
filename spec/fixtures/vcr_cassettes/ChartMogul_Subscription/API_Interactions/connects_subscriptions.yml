---
http_interactions:
- request:
    method: post
    uri: https://api.chartmogul.com/v1/data_sources
    body:
      encoding: UTF-8
      string: '{"name":"Subscription Test Data Source f1cdb9bb5b563bf82a46"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:05 GMT
      content-type:
      - application/json
      content-length:
      - '188'
      connection:
      - keep-alive
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: UTF-8
      string: '{"uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15","name":"Subscription
        Test Data Source f1cdb9bb5b563bf82a46","system":"Import API","created_at":"2025-03-14T12:43:05.201Z","status":"idle"}'
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:05 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/customers
    body:
      encoding: UTF-8
      string: '{"external_id":"test_cus_ext_id","name":"Test Customer","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:05 GMT
      content-type:
      - application/json
      content-length:
      - '799'
      connection:
      - keep-alive
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJpZCI6MjA0ODE2NzYzLCJ1dWlkIjoiY3VzX2UwMTU3ZTIyLTAwZDEtMTFmMC1hZmZjLTNmZTFmOGI3YjZhYiIsImV4dGVybmFsX2lkIjoidGVzdF9jdXNfZXh0X2lkIiwibmFtZSI6IlRlc3QgQ3VzdG9tZXIiLCJlbWFpbCI6IiIsInN0YXR1cyI6Ik5ldyBMZWFkIiwiY3VzdG9tZXItc2luY2UiOm51bGwsImF0dHJpYnV0ZXMiOnsiY3VzdG9tIjp7fSwic3RyaXBlIjp7fSwidGFncyI6W119LCJkYXRhX3NvdXJjZV91dWlkIjoiZHNfZGZkOThkZjQtMDBkMS0xMWYwLThlYzgtZGI5MzE2YTE5YTE1IiwiZGF0YV9zb3VyY2VfdXVpZHMiOlsiZHNfZGZkOThkZjQtMDBkMS0xMWYwLThlYzgtZGI5MzE2YTE5YTE1Il0sImV4dGVybmFsX2lkcyI6WyJ0ZXN0X2N1c19leHRfaWQiXSwiY29tcGFueSI6IiIsImNvdW50cnkiOm51bGwsInN0YXRlIjpudWxsLCJjaXR5IjpudWxsLCJ6aXAiOm51bGwsImxlYWRfY3JlYXRlZF9hdCI6bnVsbCwiZnJlZV90cmlhbF9zdGFydGVkX2F0IjpudWxsLCJhZGRyZXNzIjp7ImNvdW50cnkiOm51bGwsInN0YXRlIjpudWxsLCJjaXR5IjpudWxsLCJhZGRyZXNzX3ppcCI6bnVsbH0sIm1yciI6MCwiYXJyIjowLCJiaWxsaW5nLXN5c3RlbS11cmwiOm51bGwsImNoYXJ0bW9ndWwtdXJsIjoiaHR0cHM6Ly9hcHAuY2hhcnRtb2d1bC5jb20vIy9jdXN0b21lcnMvMjA0ODE2NzYzLVRlc3RfQ3VzdG9tZXIiLCJiaWxsaW5nLXN5c3RlbS10eXBlIjoiSW1wb3J0IEFQSSIsImN1cnJlbmN5IjoiSlBZIiwiY3VycmVuY3ktc2lnbiI6IsKlIiwib3duZXIiOm51bGwsIndlYnNpdGVfdXJsIjpudWxsfQ==
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:05 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/plans
    body:
      encoding: UTF-8
      string: '{"name":"Test Plan1","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:05 GMT
      content-type:
      - application/json; charset=utf-8
      content-length:
      - '225'
      connection:
      - keep-alive
      x-frame-options:
      - DENY
      x-xss-protection:
      - 1; mode=block
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-permitted-cross-domain-policies:
      - none
      referrer-policy:
      - strict-origin-when-cross-origin
      etag:
      - W/"e8fa469f5ff21682c7e319a9f83a3f1a"
      cache-control:
      - max-age=0, private, must-revalidate
      x-request-id:
      - 7c4c94272c3ad605409b0a6afb5d0452
      x-runtime:
      - '0.048691'
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: UTF-8
      string: '{"external_id":"ccc68570-e2ff-013d-ba8f-12d3a1c76dc7","name":"Test
        Plan1","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15","uuid":"pl_ccc68570-e2ff-013d-ba8f-12d3a1c76dc7"}'
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:05 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/plans
    body:
      encoding: UTF-8
      string: '{"name":"Test Plan2","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:06 GMT
      content-type:
      - application/json; charset=utf-8
      content-length:
      - '225'
      connection:
      - keep-alive
      x-frame-options:
      - DENY
      x-xss-protection:
      - 1; mode=block
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-permitted-cross-domain-policies:
      - none
      referrer-policy:
      - strict-origin-when-cross-origin
      etag:
      - W/"6d0a51fee3fb69457457bb25f3d7b43d"
      cache-control:
      - max-age=0, private, must-revalidate
      x-request-id:
      - 2a49784f1b0ff5056b0701ba4f34d748
      x-runtime:
      - '0.046206'
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: UTF-8
      string: '{"external_id":"ccee1610-e2ff-013d-ba90-12d3a1c76dc7","name":"Test
        Plan2","interval_count":7,"interval_unit":"day","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15","uuid":"pl_ccee1610-e2ff-013d-ba90-12d3a1c76dc7"}'
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:06 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/import/customers/cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab/invoices
    body:
      encoding: UTF-8
      string: '{"invoices":[{"date":"2016-01-01 12:00:00 UTC","currency":"USD","line_items":[{"type":"subscription","subscription_external_id":"test_cus_sub_ext_id1","service_period_start":"2016-01-01
        12:00:00 UTC","service_period_end":"2016-02-01 12:00:00 UTC","amount_in_cents":1000,"plan_uuid":"pl_ccc68570-e2ff-013d-ba8f-12d3a1c76dc7"}],"external_id":"test_tr_inv_ext_id1"},{"date":"2016-01-01
        12:00:00 UTC","currency":"USD","line_items":[{"type":"subscription","subscription_external_id":"test_cus_sub_ext_id2","service_period_start":"2016-01-01
        12:00:00 UTC","service_period_end":"2016-02-01 12:00:00 UTC","amount_in_cents":1000,"plan_uuid":"pl_ccee1610-e2ff-013d-ba90-12d3a1c76dc7"}],"external_id":"test_tr_inv_ext_id2"}],"customer_uuid":"cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 201
      message: Created
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:06 GMT
      content-type:
      - application/json; charset=utf-8
      content-length:
      - '1678'
      connection:
      - keep-alive
      x-frame-options:
      - DENY
      x-xss-protection:
      - 1; mode=block
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-permitted-cross-domain-policies:
      - none
      referrer-policy:
      - strict-origin-when-cross-origin
      etag:
      - W/"9cc10097c033b40ee8e8c26a9daa60db"
      cache-control:
      - max-age=0, private, must-revalidate
      x-request-id:
      - cb62f61d03dea0a6dd6c354f9129a845
      x-runtime:
      - '0.174007'
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: UTF-8
      string: '{"invoices":[{"uuid":"inv_7f52a987-2af0-44d6-aa15-662a73c16046","date":"2016-01-01T12:00:00.000Z","due_date":null,"errors":{},"external_id":"test_tr_inv_ext_id1","currency":"USD","line_items":[{"uuid":"li_ea21686c-fadc-4987-8dd6-225002a100ca","external_id":null,"type":"subscription","subscription_uuid":"sub_da3f7e04-5430-4c02-bbae-975e3334a52b","subscription_external_id":"test_cus_sub_ext_id1","prorated":false,"proration_type":null,"service_period_start":"2016-01-01T12:00:00.000Z","service_period_end":"2016-02-01T12:00:00.000Z","plan_uuid":"pl_ccc68570-e2ff-013d-ba8f-12d3a1c76dc7","amount_in_cents":1000,"quantity":1,"discount_code":"","discount_amount_in_cents":0,"tax_amount_in_cents":0,"transaction_fees_in_cents":0,"account_code":"","transaction_fees_currency":null,"discount_description":null,"event_order":null}],"transactions":[]},{"uuid":"inv_9bfaaf88-9731-4068-b347-0ff7ffab5cf6","date":"2016-01-01T12:00:00.000Z","due_date":null,"errors":{},"external_id":"test_tr_inv_ext_id2","currency":"USD","line_items":[{"uuid":"li_f40326e3-e432-4c93-9b55-31024f8dd017","external_id":null,"type":"subscription","subscription_uuid":"sub_0736b14e-369e-4980-bd6a-4ab51f24a784","subscription_external_id":"test_cus_sub_ext_id2","prorated":false,"proration_type":null,"service_period_start":"2016-01-01T12:00:00.000Z","service_period_end":"2016-02-01T12:00:00.000Z","plan_uuid":"pl_ccee1610-e2ff-013d-ba90-12d3a1c76dc7","amount_in_cents":1000,"quantity":1,"discount_code":"","discount_amount_in_cents":0,"tax_amount_in_cents":0,"transaction_fees_in_cents":0,"account_code":"","transaction_fees_currency":null,"discount_description":null,"event_order":null}],"transactions":[]}]}'
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:06 GMT
- request:
    method: get
    uri: https://api.chartmogul.com/v1/import/customers/cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab/subscriptions
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 200
      message: OK
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:07 GMT
      content-type:
      - application/json; charset=utf-8
      content-length:
      - '692'
      connection:
      - keep-alive
      x-frame-options:
      - DENY
      x-xss-protection:
      - 1; mode=block
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-permitted-cross-domain-policies:
      - none
      referrer-policy:
      - strict-origin-when-cross-origin
      etag:
      - W/"bc2825b522e0f3f7d643bee7e7c0b678"
      cache-control:
      - max-age=0, private, must-revalidate
      x-request-id:
      - c2eb42b1fc3c4ca64341c1422fe83741
      x-runtime:
      - '0.042288'
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: UTF-8
      string: '{"customer_uuid":"cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab","subscriptions":[{"external_id":"test_cus_sub_ext_id1","uuid":"sub_da3f7e04-5430-4c02-bbae-975e3334a52b","cancellation_dates":[],"plan_uuid":"pl_ccc68570-e2ff-013d-ba8f-12d3a1c76dc7","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"},{"external_id":"test_cus_sub_ext_id2","uuid":"sub_0736b14e-369e-4980-bd6a-4ab51f24a784","cancellation_dates":[],"plan_uuid":"pl_ccee1610-e2ff-013d-ba90-12d3a1c76dc7","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"}],"current_page":1,"total_pages":1,"cursor":"MjAyNS0wMy0xNFQxMjo0MzowNi42MzYyNzUwMDBaJnN1Yl8wNzM2YjE0ZS0zNjllLTQ5ODAtYmQ2YS00YWI1MWYyNGE3ODQ=","has_more":false}'
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:07 GMT
- request:
    method: patch
    uri: https://api.chartmogul.com/v1/import/subscriptions/sub_da3f7e04-5430-4c02-bbae-975e3334a52b
    body:
      encoding: UTF-8
      string: '{"cancelled_at":"2016-01-15 12:00:00 UTC"}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 202
      message: Accepted
    headers:
      date:
      - Fri, 14 Mar 2025 12:43:07 GMT
      content-type:
      - application/json; charset=utf-8
      transfer-encoding:
      - chunked
      connection:
      - keep-alive
      x-frame-options:
      - DENY
      x-xss-protection:
      - 1; mode=block
      x-content-type-options:
      - nosniff
      x-download-options:
      - noopen
      x-permitted-cross-domain-policies:
      - none
      referrer-policy:
      - strict-origin-when-cross-origin
      cache-control:
      - no-cache
      x-request-id:
      - 1052e17fbd88bee2fd4d8e119e3bdb36
      x-runtime:
      - '0.090995'
    body:
      encoding: UTF-8
      string: '{"external_id":"test_cus_sub_ext_id1","uuid":"sub_da3f7e04-5430-4c02-bbae-975e3334a52b","cancellation_dates":["2016-01-15T12:00:00.000Z"],"plan_uuid":"pl_ccc68570-e2ff-013d-ba8f-12d3a1c76dc7","customer_uuid":"cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"}'
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:43:07 GMT
- request:
    method: post
    uri: https://api.chartmogul.com/v1/customers/cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab/connect_subscriptions
    body:
      encoding: UTF-8
      string: '{"subscriptions":[{"external_id":"test_cus_sub_ext_id1","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"},{"external_id":"test_cus_sub_ext_id2","data_source_uuid":"ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15"}]}'
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 202
      message: Accepted
    headers:
      date:
      - Fri, 14 Mar 2025 12:48:07 GMT
      content-type:
      - application/json
      content-length:
      - '2'
      connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: "{}"
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:48:07 GMT
- request:
    method: get
    uri: https://api.chartmogul.com/v1/customers/cus_e0157e22-00d1-11f0-affc-3fe1f8b7b6ab/subscriptions
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Content-Type:
      - application/json
      Authorization:
      - Basic hidden
  response:
    status:
      code: 200
      message: OK
    headers:
      date:
      - Fri, 14 Mar 2025 12:49:08 GMT
      content-type:
      - application/json
      content-length:
      - '499'
      connection:
      - keep-alive
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: ASCII-8BIT
      string: !binary |-
        eyJlbnRyaWVzIjpbeyJpZCI6MzY2NjE5ODE1MywiZXh0ZXJuYWxfaWQiOiJ0ZXN0X2N1c19zdWJfZXh0X2lkMiIsInN1YnNjcmlwdGlvbl9zZXRfZXh0ZXJuYWxfaWQiOiJ0ZXN0X2N1c19zdWJfZXh0X2lkMiIsInF1YW50aXR5IjoxLCJ1dWlkIjoiNDcyZDBiYTgtZjY0MC00ODc2LThiYWUtNGM4MGJmZGEyZWQ5IiwibXJyIjo1MjMzODcsImFyciI6NjI4MDY0NCwic3RhdHVzIjoiYWN0aXZlIiwicGxhbiI6IlRlc3QgUGxhbjIiLCJiaWxsaW5nLWN5Y2xlIjoiZGF5IiwiYmlsbGluZy1jeWNsZS1jb3VudCI6Nywic3RhcnQtZGF0ZSI6IjIwMTYtMDEtMDFUMTI6MDA6MDArMDA6MDAiLCJlbmQtZGF0ZSI6IjIwMTYtMDItMDFUMTI6MDA6MDArMDA6MDAiLCJjdXJyZW5jeSI6IkpQWSIsImN1cnJlbmN5LXNpZ24iOiLCpSJ9XSwiaGFzX21vcmUiOmZhbHNlLCJwZXJfcGFnZSI6MjAwLCJwYWdlIjoxLCJjdXJzb3IiOiJjM1ZpYzJOeWFYQjBhVzl1YzE5dVpYaDBYM0JoWjJVOU1nPT0ifQ==
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:49:08 GMT
- request:
    method: delete
    uri: https://api.chartmogul.com/v1/data_sources/ds_dfd98df4-00d1-11f0-8ec8-db9316a19a15
    body:
      encoding: US-ASCII
      string: ''
    headers:
      User-Agent:
      - chartmogul-ruby/4.5.0
      Authorization:
      - Basic hidden
  response:
    status:
      code: 204
      message: No Content
    headers:
      date:
      - Fri, 14 Mar 2025 12:49:08 GMT
      connection:
      - keep-alive
      access-control-allow-credentials:
      - 'true'
    body:
      encoding: UTF-8
      string: ''
    http_version:
  recorded_at: Fri, 14 Mar 2025 12:49:08 GMT
recorded_with: VCR 5.1.0
